{
  "nodes": [
    {
      "nodeId": "userGuide",
      "name": "common:core.module.template.system_config",
      "intro": "common:core.module.template.system_config_info",
      "avatar": "core/workflow/template/systemConfig",
      "flowNodeType": "userGuide",
      "position": {
        "x": 27.528975817193157,
        "y": -461.269508140175
      },
      "version": "481",
      "inputs": [
        {
          "key": "welcomeText",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "string",
          "label": "core.app.Welcome Text",
          "value": ""
        },
        {
          "key": "variables",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "label": "core.app.Chat Variable",
          "value": []
        },
        {
          "key": "questionGuide",
          "valueType": "any",
          "renderTypeList": [
            "hidden"
          ],
          "label": "core.app.Question Guide",
          "value": {
            "open": false
          }
        },
        {
          "key": "tts",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "label": "",
          "value": {
            "type": "web"
          }
        },
        {
          "key": "whisper",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "label": "",
          "value": {
            "open": false,
            "autoSend": false,
            "autoTTSResponse": false
          }
        },
        {
          "key": "scheduleTrigger",
          "renderTypeList": [
            "hidden"
          ],
          "valueType": "any",
          "label": "",
          "value": null
        }
      ],
      "outputs": []
    },
    {
      "nodeId": "448745",
      "name": "common:core.module.template.work_start",
      "intro": "",
      "avatar": "core/workflow/template/workflowStart",
      "flowNodeType": "workflowStart",
      "position": {
        "x": 546.0365570067204,
        "y": -461.269508140175
      },
      "version": "481",
      "inputs": [
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "workflow:user_question",
          "required": true,
          "toolDescription": "用户问题",
          "debugLabel": ""
        }
      ],
      "outputs": [
        {
          "id": "userChatInput",
          "key": "userChatInput",
          "label": "common:core.module.input.label.user question",
          "type": "static",
          "valueType": "string",
          "description": ""
        }
      ],
      "isFolded": false
    },
    {
      "nodeId": "o0zczCT4Rx5oxiei",
      "name": "AI 对话",
      "intro": "AI 大模型对话",
      "avatar": "core/workflow/template/aiChat",
      "flowNodeType": "chatNode",
      "showStatus": true,
      "position": {
        "x": 970.4842119987679,
        "y": -789.9536684759478
      },
      "version": "4.9.7",
      "inputs": [
        {
          "key": "model",
          "renderTypeList": [
            "settingLLMModel",
            "reference"
          ],
          "label": "common:core.module.input.label.aiModel",
          "valueType": "string",
          "value": "doubao-seed-1-6-250615",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "temperature",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "maxToken",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "isResponseAnswerText",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "value": false,
          "valueType": "boolean",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatQuoteRole",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "value": "system",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteTemplate",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quotePrompt",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatVision",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatReasoning",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "boolean",
          "value": false,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatTopP",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "number",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatStopSign",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatResponseFormat",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "aiChatJsonSchema",
          "renderTypeList": [
            "hidden"
          ],
          "label": "",
          "valueType": "string",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "systemPrompt",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "max": 3000,
          "valueType": "string",
          "label": "common:core.ai.Prompt",
          "description": "common:core.app.tip.systemPromptTip",
          "placeholder": "common:core.app.tip.chatNodeSystemPromptTip",
          "value": "Role: 论文分析专家\n\nBackground: 用户需要分析Latex格式的学术论文，提取模块架构和核心算法信息，并以结构化形式呈现。这需要深入理解学术论文的组织结构和算法描述方式。\n\nAttention: 专注于准确识别论文中的模块划分和算法核心，保持输出的精简性和专业性。\n\nProfile: 你是一位资深的学术论文分析专家，擅长解析复杂的技术文档，能够快速准确地提取关键信息并建立清晰的逻辑关系。\n\nGoals:\n1. 完整解析输入的Latex论文内容，识别所有重要模块和组件\n2. 准确提取每个模块的核心算法和技术实现细节\n3. 建立清晰的模块间关系映射，描述输入输出依赖\n4. 生成结构化的markdown输出，确保信息完整且简洁\n5. 保持分析的专业性和准确性，避免信息遗漏或误解\n\nConstrains:\n1. 严格基于输入的Latex原文内容进行分析，不添加外部知识\n2. 确保模块划分和算法描述与原文保持一致，不进行主观解读\n3. 模块间关系描述必须准确反映原文中的依赖关系\n4. 避免使用技术术语的通俗化解释，保持学术严谨性\n\nWorkflow:\n1. 接收用户输入的Latex论文原文，进行完整的内容解析\n2. 识别论文的整体结构，划分主要功能模块和子模块\n3. 提取每个模块的核心算法描述，包括关键步骤和实现细节\n4. 分析模块间的数据流和依赖关系，建立输入输出映射\n5. 按照markdown格式组织输出内容，确保结构清晰和内容精简\n\nOutputFormat:\n1. 使用二级标题标识主要模块，三级标题标识子模块\n2. 每个算法描述使用项目符号列出关键步骤和核心要素\n3. 模块关系部分使用段落描述，明确说明数据流向和依赖关系\n4.尽可能多的包含以下这样的代码实现细节\n**代码实现细节**\n实现位置:attention tfpy:77-82attention keras.py:103-119输入参数: Q, K,V(shape[batch size, seq len, d k])处理步骤:\n1.计算点积:`A =tf.matmul(Q, Ktranspose b=True)2.缩放:A = A/tf.sqrt(float(size_per head))3.应用掩码:`A = Mask(A,V len,mode='add')`4.Softmax:`A =tfnn.softmax(A)5.加权求和:O = tfmatmul(A, V)",
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "history",
          "renderTypeList": [
            "numberInput",
            "reference"
          ],
          "valueType": "chatHistory",
          "label": "common:core.module.input.label.chat history",
          "description": "workflow:max_dialog_rounds",
          "required": true,
          "min": 0,
          "max": 50,
          "value": 6,
          "debugLabel": "",
          "toolDescription": ""
        },
        {
          "key": "quoteQA",
          "renderTypeList": [
            "settingDatasetQuotePrompt"
          ],
          "label": "",
          "debugLabel": "知识库引用",
          "valueType": "datasetQuote",
          "description": "",
          "toolDescription": ""
        },
        {
          "key": "fileUrlList",
          "renderTypeList": [
            "reference",
            "input"
          ],
          "label": "app:workflow.user_file_input",
          "debugLabel": "文件链接",
          "description": "app:workflow.user_file_input_desc",
          "valueType": "arrayString",
          "value": [
            [
              "448745",
              "userFiles"
            ]
          ],
          "toolDescription": ""
        },
        {
          "key": "userChatInput",
          "renderTypeList": [
            "reference",
            "textarea"
          ],
          "valueType": "string",
          "label": "workflow:user_question",
          "toolDescription": "用户问题",
          "required": true,
          "value": [
            "448745",
            "userChatInput"
          ],
          "selectedTypeIndex": 0,
          "debugLabel": ""
        }
      ],
      "outputs": [
        {
          "id": "history",
          "key": "history",
          "required": true,
          "label": "common:core.module.output.label.New context",
          "description": "将本次回复内容拼接上历史记录，作为新的上下文返回",
          "valueType": "chatHistory",
          "valueDesc": "{\n  obj: System | Human | AI;\n  value: string;\n}[]",
          "type": "static"
        },
        {
          "id": "answerText",
          "key": "answerText",
          "required": true,
          "label": "common:core.module.output.label.Ai response content",
          "description": "将在 stream 回复完毕后触发",
          "valueType": "string",
          "type": "static",
          "valueDesc": ""
        },
        {
          "id": "reasoningText",
          "key": "reasoningText",
          "required": false,
          "label": "workflow:reasoning_text",
          "valueType": "string",
          "type": "static",
          "invalid": false,
          "valueDesc": "",
          "description": ""
        },
        {
          "id": "system_error_text",
          "key": "system_error_text",
          "type": "error",
          "valueType": "string",
          "label": "workflow:error_text",
          "valueDesc": "",
          "description": ""
        }
      ],
      "catchError": false
    },
    {
      "nodeId": "lrgcAO3voZXu0tep",
      "name": "指定回复",
      "intro": "该模块可以直接回复一段指定的内容。常用于引导、提示。非字符串内容传入时，会转成字符串进行输出。",
      "avatar": "core/workflow/template/reply",
      "flowNodeType": "answerNode",
      "position": {
        "x": 1736.6714834934667,
        "y": -614.769508140175
      },
      "inputs": [
        {
          "key": "text",
          "renderTypeList": [
            "textarea",
            "reference"
          ],
          "valueType": "any",
          "required": true,
          "label": "common:core.module.input.label.Response content",
          "description": "common:core.module.input.description.Response content",
          "placeholder": "common:core.module.input.description.Response content",
          "value": "{{$o0zczCT4Rx5oxiei.answerText$}}",
          "debugLabel": "",
          "toolDescription": ""
        }
      ],
      "outputs": []
    }
  ],
  "edges": [
    {
      "source": "448745",
      "target": "o0zczCT4Rx5oxiei",
      "sourceHandle": "448745-source-right",
      "targetHandle": "o0zczCT4Rx5oxiei-target-left"
    },
    {
      "source": "o0zczCT4Rx5oxiei",
      "target": "lrgcAO3voZXu0tep",
      "sourceHandle": "o0zczCT4Rx5oxiei-source-right",
      "targetHandle": "lrgcAO3voZXu0tep-target-left"
    }
  ],
  "chatConfig": {
    "variables": [],
    "scheduledTriggerConfig": {
      "cronString": "",
      "timezone": "Asia/Shanghai",
      "defaultPrompt": ""
    },
    "fileSelectConfig": {
      "canSelectFile": false,
      "canSelectImg": false,
      "maxFiles": 10,
      "customPdfParse": true
    },
    "_id": "68c51fbf5749f574d283eef8"
  }
}